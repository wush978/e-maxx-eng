<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<!--?title Balanced Ternary-->
<h1 id="balanced-ternary">Balanced Ternary</h1>
<div class="figure">
<img src="http://ternary.3neko.ru/photo/setun1_small.jpg" alt="&quot;Setun computer using Balanced Ternary system&quot;" />
<p class="caption">&quot;Setun computer using Balanced Ternary system&quot;</p>
</div>
<p>This is a non-standard but still positional <strong>numeral system</strong>. It's feature is that digits can have one of values <code>-1</code>, <code>0</code> and <code>1</code>. Nevertheless, its base is still <code>3</code> (because there are three possible values). Since it is not convenient to write <code>-1</code> as a digit, we'll use letter <code>Z</code> further for this purpose. If you think it is quite a strange system - look at the picture - here is one of the computers utilizing it.</p>
<p>So here are few first numbers written in balanced ternary:</p>
<pre class="nohighlight"><code>    0    0
    1    1
    2    1Z
    3    10
    4    11
    5    1ZZ
    6    1Z0
    7    1Z1
    8    10Z
    9    100</code></pre>
<p>This system allows you to write negative values without leading minus sign: you can simply invert digits in any positive number.</p>
<pre class="nohighlight"><code>    -1   Z
    -2   Z1
    -3   Z0
    -4   ZZ
    -5   Z11</code></pre>
<p>Note that a negative number starts with <code>Z</code> and positive with <code>1</code>.</p>
<h2 id="conversion-algorithm">Conversion algorithm</h2>
<p>It is easy to represent a given number in <strong>balanced ternary</strong> via temporary representing it in normal ternary number system. When value is in standard ternary, its digits are either <code>0</code> or <code>1</code> or <code>2</code>. Iterating from the lowest digit we can safely skip any <code>0</code>s and <code>1</code>s, however <code>2</code> should be turned into <code>Z</code> with adding <code>1</code> to the next digit. Digits <code>3</code> should be turned into <code>0</code> on the same terms - such digits are not present in the number initially but they can be encountered after increasing some <code>2</code>s.</p>
<p><strong>Example 1:</strong> Let us convert <code>64</code> to balanced ternary. At first we use normal ternary to rewrite the number:</p>
<p><br /><span class="math display">64<sub>10</sub> = 02101<sub>3</sub></span><br /></p>
<p>Let us process it from the least significant (rightmost) digit:</p>
<ul>
<li><code>1</code>,<code>0</code> and <code>1</code> are skipped as it is.( Because <code>0</code> and <code>1</code> are allowed in balanced ternary )</li>
<li><code>2</code> is turned into <code>Z</code> increasing the digit to its left, so we get <code>1Z101</code>.</li>
</ul>
<p>The final result is <code>1Z101</code>.</p>
<p>Let us convert it back to the decimal system by adding the weighted positional values: <br /><span class="math display">1<em>Z</em>101 = 81 ⋅ 1 + 27 ⋅ ( − 1)+9 ⋅ 1 + 3 ⋅ 0 + 1 ⋅ 1 = 64<sub>10</sub></span><br /></p>
<p><strong>Example 2:</strong> Let us convert <code>237</code> to balanced ternary. At first we use normal ternary to rewrite the number:</p>
<p><br /><span class="math display">237<sub>10</sub> = 22210<sub>3</sub></span><br /></p>
<p>Let us process it from the least significant (rightmost) digit:</p>
<ul>
<li><code>0</code> and <code>1</code> are skipped as it is.( Because <code>0</code> and <code>1</code> are allowed in balanced ternary )</li>
<li><code>2</code> is turned into <code>Z</code> increasing the digit to its left, so we get <code>23Z10</code>.</li>
<li><code>3</code> is turned into <code>0</code> increasing the digit to its left, so we get <code>30Z10</code>.</li>
<li><code>3</code> is turned into <code>0</code> increasing the digit to its left( which is by default <code>0</code> ), and so we get <code>100Z10</code>.</li>
</ul>
<p>The final result is <code>100Z10</code>.</p>
<p>Let us convert it back to the decimal system by adding the weighted positional values: <br /><span class="math display">100<em>Z</em>10 = 243 ⋅ 1 + 81 ⋅ 0 + 27 ⋅ 0 + 9 ⋅ ( − 1)+3 ⋅ 1 + 1 ⋅ 0 = 237<sub>10</sub></span><br /></p>
<h2 id="practice-problems">Practice Problems</h2>
<ul>
<li><a href="http://community.topcoder.com/stat?c=problem_statement&amp;pm=12917&amp;rd=15837">Topcoder SRM 604, Div1-250</a></li>
</ul>
</body>
</html>
